(function(t){function e(e){for(var c,s,o=e[0],i=e[1],l=e[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&(t[c]=i[c]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],c=!0,o=1;o<n.length;o++){var i=n[o];0!==a[i]&&(c=!1)}c&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var c={},a={app:0},r=[];function s(e){if(c[e])return c[e].exports;var n=c[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=c,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)s.d(n,c,function(e){return t[e]}.bind(null,c));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="what-am-i-missing/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=i;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);var c=n("7a23");function a(t,e,n,a,r,s){const o=Object(c["l"])("Header"),i=Object(c["l"])("mainBody");return Object(c["h"])(),Object(c["d"])(c["a"],null,[Object(c["g"])(o),Object(c["g"])(i)],64)}const r=t=>(Object(c["j"])("data-v-1843b36f"),t=t(),Object(c["i"])(),t),s={class:"topnav"},o=r(()=>Object(c["e"])("a",{class:"active",href:"#home"},"what's my deck missing?",-1)),i=[o];function l(t,e,n,a,r,o){return Object(c["h"])(),Object(c["d"])("div",s,i)}var u={name:"Header",props:{}},d=(n("5c6f"),n("6b0d")),p=n.n(d);const b=p()(u,[["render",l],["__scopeId","data-v-1843b36f"]]);var f=b;const m={id:"inputs",class:"flexbox"},h=Object(c["e"])("br",null,null,-1);function O(t,e,n,a,r,s){const o=Object(c["l"])("inputs"),i=Object(c["l"])("compareData"),l=Object(c["l"])("outputData"),u=Object(c["l"])("scryfall-data");return Object(c["h"])(),Object(c["d"])("div",null,[Object(c["e"])("div",m,[Object(c["g"])(o,{name:"decklist",onOndecklistUpdate:e[0]||(e[0]=t=>r.decklist=t)}),Object(c["g"])(o,{name:"collection",onOncollectionUpdate:e[1]||(e[1]=t=>r.collection=t)})]),Object(c["g"])(i,{decklist:r.decklist,collection:r.collection,onOnDataCompared:e[2]||(e[2]=t=>r.outputResult=t)},null,8,["decklist","collection"]),h,Object(c["g"])(l,{outputText:r.outputResult,scryfallInfo:r.scryfallInfo},null,8,["outputText","scryfallInfo"]),Object(c["g"])(u,{outputText:r.outputResult,onOnCardInfoUpdated:s.something},null,8,["outputText","onOnCardInfoUpdated"])])}const j=["placeholder","id"];function y(t,e,n,a,r,s){return Object(c["h"])(),Object(c["d"])("textarea",{class:"input",placeholder:n.name,id:n.name,onInput:e[0]||(e[0]=(...t)=>s.updateContent&&s.updateContent(...t))},null,40,j)}var v={name:"inputs",props:["name"],methods:{updateContent(t){const e=`on${this.name}Update`,n=new Map;let c,a;const r=t.target.value.split(/\n/);r.forEach(t=>{[c,a]=this.formatData(t),n.set(c,{qty:a})}),this.$emit(e,n)},formatData(t){let e=this.trimMetaData(t),n=this.quantifyAmount(e),c=this.removeAmount(e).toLowerCase();return c.endsWith(" ")&&(c=c.slice(0,-1)),[c,n]},trimMetaData(t){let e=t;return t.includes("[")&&(e=t.split("[")[0]),e},quantifyAmount(t){let e=t.split(" ")[0];return e.includes("x")&&(e=e.replace("x","")),e=Number(e),e},removeAmount(t){const e=t.split(" ");return e.shift(),e.join(" ")}}};n("5c78");const g=p()(v,[["render",y],["__scopeId","data-v-97ccc5c8"]]);var x=g;const _={class:"flexbox"};function w(t,e,n,a,r,s){const o=Object(c["l"])("base-button");return Object(c["h"])(),Object(c["d"])("div",_,[Object(c["g"])(o,{id:"compareData",text:"give me the list",onClick:s.compareFiles},null,8,["onClick"])])}n("14d9");const I=["id"];function T(t,e,n,a,r,s){return Object(c["h"])(),Object(c["d"])("button",{id:n.id,class:"btn"},Object(c["m"])(n.text),9,I)}var D={name:"baseButton",props:["id","text"]};n("ed65");const C=p()(D,[["render",T],["__scopeId","data-v-a80f1f54"]]);var k=C,A={name:"compareData",props:["decklist","collection"],components:{baseButton:k},methods:{compareFiles(){let t=[];this.decklist.forEach((e,n)=>{const c=n,a=e.qty;this.collection.has(c)?this.collection.get(c).qty<a&&t.push(`${a-this.collection.get(c).qty} ${c}`):t.push(`${a} ${c}`)}),this.$emit("onDataCompared",t)}}};const P=p()(A,[["render",w]]);var U=P;const S=t=>(Object(c["j"])("data-v-6c8bec60"),t=t(),Object(c["i"])(),t),B={key:0,class:"output"},E=["value"],L=S(()=>Object(c["e"])("br",null,null,-1)),q=S(()=>Object(c["e"])("br",null,null,-1)),R={id:"textInfo",class:"flexbox"},$={id:"rarities",class:"textBlock"},N=S(()=>Object(c["e"])("br",null,null,-1)),M=S(()=>Object(c["e"])("br",null,null,-1)),F=S(()=>Object(c["e"])("br",null,null,-1)),H=S(()=>Object(c["e"])("br",null,null,-1)),J=S(()=>Object(c["e"])("br",null,null,-1)),Q={id:"prices",class:"textBlock"},V=S(()=>Object(c["e"])("br",null,null,-1)),W=S(()=>Object(c["e"])("br",null,null,-1)),z=S(()=>Object(c["e"])("br",null,null,-1)),G={class:"flexbox"};function K(t,e,n,a,r,s){const o=Object(c["l"])("base-button"),i=Object(c["l"])("baseImage");return r.showOutput?(Object(c["h"])(),Object(c["d"])("div",B,[Object(c["e"])("textarea",{id:"output",class:"textArea",value:r.formattedText,readonly:""},null,8,E),L,Object(c["g"])(o,{id:"`copy`",text:"clipboard",onClick:s.copyToClipboard},null,8,["onClick"]),q,Object(c["e"])("div",R,[Object(c["e"])("div",$,[Object(c["f"])(" rarities: "),N,Object(c["f"])(" commons: "+Object(c["m"])(r.rarities.common)+" ",1),M,Object(c["f"])(" uncommons: "+Object(c["m"])(r.rarities.uncommon)+" ",1),F,Object(c["f"])(" rares: "+Object(c["m"])(r.rarities.rare)+" ",1),H,Object(c["f"])(" mythic rares: "+Object(c["m"])(r.rarities.mythic)+" ",1),J]),Object(c["e"])("div",Q,[Object(c["f"])(" Estimated price: "),V,W,Object(c["f"])(" $"+Object(c["m"])(r.prices.usd)+" ",1),z,Object(c["f"])(" â‚¬"+Object(c["m"])(r.prices.eur),1)])]),Object(c["e"])("div",G,[(Object(c["h"])(!0),Object(c["d"])(c["a"],null,Object(c["k"])(n.scryfallInfo,t=>(Object(c["h"])(),Object(c["d"])("div",{key:t.image},[Object(c["g"])(i,{source:t.image},null,8,["source"])]))),128))])])):Object(c["c"])("",!0)}const X=["src"];function Y(t,e,n,a,r,s){return Object(c["h"])(),Object(c["d"])("img",{class:"baseImage",src:n.source},null,8,X)}var Z={name:"baseImage",props:["source"]};n("7359");const tt=p()(Z,[["render",Y],["__scopeId","data-v-14641780"]]);var et=tt,nt={name:"outputData",props:["outputText","scryfallInfo"],components:{baseButton:k,baseImage:et},watch:{outputText:function(){this.showOutput||(this.showOutput=!0),this.formattedText=this.outputText.join("\n"),this.resetData()},scryfallInfo:function(){let t=[];this.scryfallInfo.forEach(e=>{this.rarities[e.rarity]+=e.qty;let n=this.prices;n.usd=this.updatePrice(n.usd,e.prices.usd),n.usd_foil=this.updatePrice(n.usd_foil,e.prices.usd_foil),n.usd_etched=this.updatePrice(n.usd_etched,e.prices.usd_etched),n.eur=this.updatePrice(n.eur,e.prices.eur),n.eur_foil=this.updatePrice(n.eur_foil,e.prices.eur_foil),n.tix=this.updatePrice(n.tix,e.prices.tix);const c=`${e.qty} ${e.name} [${e.sets[0].name}]`;t.push(c)}),this.formattedText=t.join("\n")}},data(){return{showOutput:!1,formattedText:"output",rarities:{common:0,uncommon:0,rare:0,mythic:0},prices:{usd:0,usd_foil:0,usd_etched:0,eur:0,eur_foil:0,tix:0}}},methods:{copyToClipboard(){var t=document.getElementById("output");t.select(),t.setSelectionRange(0,999999),navigator.clipboard.writeText(t.value),alert("copied to clipboard!")},updatePrice(t,e){if(null!=e){const n=Number(e);t+=n}return Math.round(100*t)/100},resetData(){this.rarities.common=0,this.rarities.uncommon=0,this.rarities.rare=0,this.rarities.mythic=0,this.prices.usd=0,this.prices.usd_foil=0,this.prices.usd_etched=0,this.prices.eur=0,this.prices.eur_foi=0,this.prices.usd=0}}};n("d511");const ct=p()(nt,[["render",K],["__scopeId","data-v-6c8bec60"]]);var at=ct;function rt(t,e,n,a,r,s){return Object(c["h"])(),Object(c["d"])("div")}var st=n("bc3a"),ot=n.n(st),it=n("ed18");it["config"]();const lt=Object({NODE_ENV:"production",BASE_URL:"what-am-i-missing/"}),ut={port:lt.PORT?lt.PORT:8080,baseUrl:lt.BASEURL?lt.baseURL:"https://api.scryfall.com"};var dt=ot.a.create({baseURL:ut.baseUrl,headers:{"Content-Type":"application/json"}});class pt{async getNamedCard(t){return dt.get("/cards/named?exact="+t)}async getAllSets(t){const e=this.removeBaseUrl(t);return dt.get(e)}removeBaseUrl(t){const e=dt.defaults.baseURL;return t.replace(e,"")}POST_Collection(t=[]){const e={identifiers:[]};return t.forEach(t=>{t.name&&e.identifiers.push({name:t.name})}),dt.post("/cards/collection",e)}}var bt={name:"scryfallData",props:["outputText"],data(){return{scryfall:new pt,cardData:[]}},methods:{async fetchScryfallData(){let t=this.splitAmountAndNameList(this.outputText),e=[];while(t.length>75){let n=t.splice(0,75);e=await this.getFullCardListInfo(n,e)}this.cardData=await this.getFullCardListInfo(t,e)},async convertDataToInfo(t){const e=[],n=await this.scryfall.getAllSets(t.prints_search_uri);return n.data.data.forEach(t=>{e.push({name:t.set_name,code:t.set})}),{name:t.name,sets:e,image:t.image_uris.small,rarity:t.rarity,prices:t.prices,qty:0}},async getFullCardListInfo(t,e){let n=[];t.forEach(t=>{const e={name:t.card.name};n.push(e)});let c=await this.scryfall.POST_Collection(n),a=c.data.data;for(const r of a){let n=await this.convertDataToInfo(r);n=this.setQuantity(n,t),e.push(n)}return e},setQuantity(t,e){const n=e=>e.card.name.toLowerCase()===t.name.toLowerCase(),c=e.find(n);return t.qty=c.card.quantity,t},splitAmountAndNameList(t=[]){const e=[];return t.forEach(t=>{const n=this.splitAmountAndName(t);e.push({card:n})}),e},splitAmountAndName(t){const e=t.split(" "),n=Number(e[0]);e.shift();const c=e.join(" ");return{name:c,quantity:n}}},watch:{outputText:async function(){await this.fetchScryfallData(),this.$emit("onCardInfoUpdated",this.cardData)}}};const ft=p()(bt,[["render",rt]]);var mt=ft,ht={name:"mainBody",data(){return{decklist:"",collection:"",outputResult:"",scryfallInfo:[]}},components:{inputs:x,compareData:U,outputData:at,scryfallData:mt},methods:{something(t){this.scryfallInfo=t}},props:[]};const Ot=p()(ht,[["render",O]]);var jt=Ot,yt={name:"App",components:{Header:f,mainBody:jt}};n("bbb7");const vt=p()(yt,[["render",a]]);var gt=vt;Object(c["b"])(gt).mount("#app")},"5c6f":function(t,e,n){"use strict";n("bc41")},"5c78":function(t,e,n){"use strict";n("ef2b")},"6e9f":function(t,e,n){},7359:function(t,e,n){"use strict";n("ff36")},"7c80":function(t,e,n){},b2ad:function(t,e,n){},bbb7:function(t,e,n){"use strict";n("6e9f")},bc41:function(t,e,n){},d511:function(t,e,n){"use strict";n("7c80")},ed65:function(t,e,n){"use strict";n("b2ad")},ef2b:function(t,e,n){},ff36:function(t,e,n){}});
//# sourceMappingURL=app.73d8aa5d.js.map