(function(t){function e(e){for(var r,u,o=e[0],i=e[1],s=e[2],f=0,d=[];f<o.length;f++)u=o[f],Object.prototype.hasOwnProperty.call(a,u)&&a[u]&&d.push(a[u][0]),a[u]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);l&&l(e);while(d.length)d.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],r=!0,o=1;o<n.length;o++){var i=n[o];0!==a[i]&&(r=!1)}r&&(c.splice(e--,1),t=u(u.s=n[0]))}return t}var r={},a={app:0},c=[];function u(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=t,u.c=r,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)u.d(n,r,function(e){return t[e]}.bind(null,r));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/what-am-i-missing/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=e,o=o.slice();for(var s=0;s<o.length;s++)e(o[s]);var l=i;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"050c":function(t,e,n){},"37fc":function(t,e,n){},"42ac":function(t,e,n){},"4ae7":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function a(t,e,n,a,c,u){var o=Object(r["l"])("Header"),i=Object(r["l"])("mainBody");return Object(r["h"])(),Object(r["d"])(r["a"],null,[Object(r["g"])(o),Object(r["g"])(i)],64)}var c=function(t){return Object(r["j"])("data-v-1843b36f"),t=t(),Object(r["i"])(),t},u={class:"topnav"},o=c((function(){return Object(r["e"])("a",{class:"active",href:"#home"},"what's my deck missing?",-1)})),i=[o];function s(t,e,n,a,c,o){return Object(r["h"])(),Object(r["d"])("div",u,i)}var l={name:"Header",props:{}},f=(n("5c6f"),n("d959")),d=n.n(f);const p=d()(l,[["render",s],["__scopeId","data-v-1843b36f"]]);var b=p,m={id:"inputs",class:"flexbox"},h=Object(r["e"])("br",null,null,-1);function v(t,e,n,a,c,u){var o=Object(r["l"])("inputs"),i=Object(r["l"])("compareData"),s=Object(r["l"])("outputData"),l=Object(r["l"])("scryfall-data");return Object(r["h"])(),Object(r["d"])("div",null,[Object(r["e"])("div",m,[Object(r["g"])(o,{name:"decklist",onOndecklistUpdate:e[0]||(e[0]=function(t){return c.decklist=t})}),Object(r["g"])(o,{name:"collection",onOncollectionUpdate:e[1]||(e[1]=function(t){return c.collection=t})})]),Object(r["g"])(i,{decklist:c.decklist,collection:c.collection,onOnDataCompared:e[2]||(e[2]=function(t){return c.outputResult=t})},null,8,["decklist","collection"]),h,Object(r["g"])(s,{outputText:c.outputResult,scryfallInfo:c.scryfallInfo},null,8,["outputText","scryfallInfo"]),Object(r["g"])(l,{outputText:c.outputResult,onOnCardInfoUpdated:u.something},null,8,["outputText","onOnCardInfoUpdated"])])}n("b0c0");var O=["placeholder","id"];function j(t,e,n,a,c,u){return Object(r["h"])(),Object(r["d"])("textarea",{class:"input",placeholder:n.name,id:n.name,onInput:e[0]||(e[0]=function(){return u.updateContent&&u.updateContent.apply(u,arguments)})},null,40,O)}var y=n("3835"),g=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("ac1f"),n("1276"),n("159b"),n("8a79"),n("fb6a"),n("caad"),n("2532"),n("5319"),n("a9e3"),n("a15b"),{name:"inputs",props:["name"],methods:{updateContent:function(t){var e,n,r=this,a="on".concat(this.name,"Update"),c=new Map,u=t.target.value.split(/\n/);u.forEach((function(t){var a=r.formatData(t),u=Object(y["a"])(a,2);e=u[0],n=u[1],c.set(e,{qty:n})})),this.$emit(a,c)},formatData:function(t){var e=this.trimMetaData(t),n=this.quantifyAmount(e),r=this.removeAmount(e).toLowerCase();return r.endsWith(" ")&&(r=r.slice(0,-1)),[r,n]},trimMetaData:function(t){var e=t;return t.includes("[")&&(e=t.split("[")[0]),e},quantifyAmount:function(t){var e=t.split(" ")[0];return e.includes("x")&&(e=e.replace("x","")),e=Number(e),e},removeAmount:function(t){var e=t.split(" ");return e.shift(),e.join(" ")}}});n("5c78");const x=d()(g,[["render",j],["__scopeId","data-v-97ccc5c8"]]);var w=x,_={class:"flexbox"};function k(t,e,n,a,c,u){var o=Object(r["l"])("base-button");return Object(r["h"])(),Object(r["d"])("div",_,[Object(r["g"])(o,{id:"compareData",text:"give me the list",onClick:u.compareFiles},null,8,["onClick"])])}n("99af");var I=["id"];function T(t,e,n,a,c,u){return Object(r["h"])(),Object(r["d"])("button",{id:n.id,class:"btn"},Object(r["m"])(n.text),9,I)}var D={name:"baseButton",props:["id","text"]};n("ed65");const C=d()(D,[["render",T],["__scopeId","data-v-a80f1f54"]]);var R=C,A={name:"compareData",props:["decklist","collection"],components:{baseButton:R},methods:{compareFiles:function(){var t=this,e=[];this.decklist.forEach((function(n,r){var a=r,c=n.qty;t.collection.has(a)?t.collection.get(a).qty<c&&e.push("".concat(c-t.collection.get(a).qty," ").concat(a)):e.push("".concat(c," ").concat(a))})),this.$emit("onDataCompared",e)}}};const P=d()(A,[["render",k]]);var U=P,S=function(t){return Object(r["j"])("data-v-6c8bec60"),t=t(),Object(r["i"])(),t},B={key:0,class:"output"},E=["value"],L=S((function(){return Object(r["e"])("br",null,null,-1)})),q=S((function(){return Object(r["e"])("br",null,null,-1)})),N={id:"textInfo",class:"flexbox"},M={id:"rarities",class:"textBlock"},F=Object(r["f"])(" rarities: "),$=S((function(){return Object(r["e"])("br",null,null,-1)})),H=S((function(){return Object(r["e"])("br",null,null,-1)})),J=S((function(){return Object(r["e"])("br",null,null,-1)})),Q=S((function(){return Object(r["e"])("br",null,null,-1)})),V=S((function(){return Object(r["e"])("br",null,null,-1)})),W={id:"prices",class:"textBlock"},z=Object(r["f"])(" Estimated price: "),G=S((function(){return Object(r["e"])("br",null,null,-1)})),K=S((function(){return Object(r["e"])("br",null,null,-1)})),X=S((function(){return Object(r["e"])("br",null,null,-1)})),Y={class:"flexbox"};function Z(t,e,n,a,c,u){var o=Object(r["l"])("base-button"),i=Object(r["l"])("baseImage");return c.showOutput?(Object(r["h"])(),Object(r["d"])("div",B,[Object(r["e"])("textarea",{id:"output",class:"textArea",value:c.formattedText,readonly:""},null,8,E),L,Object(r["g"])(o,{id:"`copy`",text:"clipboard",onClick:u.copyToClipboard},null,8,["onClick"]),q,Object(r["e"])("div",N,[Object(r["e"])("div",M,[F,$,Object(r["f"])(" commons: "+Object(r["m"])(c.rarities.common)+" ",1),H,Object(r["f"])(" uncommons: "+Object(r["m"])(c.rarities.uncommon)+" ",1),J,Object(r["f"])(" rares: "+Object(r["m"])(c.rarities.rare)+" ",1),Q,Object(r["f"])(" mythic rares: "+Object(r["m"])(c.rarities.mythic)+" ",1),V]),Object(r["e"])("div",W,[z,G,K,Object(r["f"])(" $"+Object(r["m"])(c.prices.usd)+" ",1),X,Object(r["f"])(" â‚¬"+Object(r["m"])(c.prices.eur),1)])]),Object(r["e"])("div",Y,[(Object(r["h"])(!0),Object(r["d"])(r["a"],null,Object(r["k"])(n.scryfallInfo,(function(t){return Object(r["h"])(),Object(r["d"])("div",{key:t.image},[Object(r["g"])(i,{source:t.image},null,8,["source"])])})),128))])])):Object(r["c"])("",!0)}var tt=["src"];function et(t,e,n,a,c,u){return Object(r["h"])(),Object(r["d"])("img",{class:"baseImage",src:n.source},null,8,tt)}var nt={name:"baseImage",props:["source"]};n("7359");const rt=d()(nt,[["render",et],["__scopeId","data-v-14641780"]]);var at=rt,ct={name:"outputData",props:["outputText","scryfallInfo"],components:{baseButton:R,baseImage:at},watch:{outputText:function(){this.showOutput||(this.showOutput=!0),this.formattedText=this.outputText.join("\n"),this.resetData()},scryfallInfo:function(){var t=this,e=[];this.scryfallInfo.forEach((function(n){t.rarities[n.rarity]+=n.qty;var r=t.prices;r.usd=t.updatePrice(r.usd,n.prices.usd),r.usd_foil=t.updatePrice(r.usd_foil,n.prices.usd_foil),r.usd_etched=t.updatePrice(r.usd_etched,n.prices.usd_etched),r.eur=t.updatePrice(r.eur,n.prices.eur),r.eur_foil=t.updatePrice(r.eur_foil,n.prices.eur_foil),r.tix=t.updatePrice(r.tix,n.prices.tix);var a="".concat(n.qty," ").concat(n.name," [").concat(n.sets[0].name,"]");e.push(a)})),this.formattedText=e.join("\n")}},data:function(){return{showOutput:!1,formattedText:"output",rarities:{common:0,uncommon:0,rare:0,mythic:0},prices:{usd:0,usd_foil:0,usd_etched:0,eur:0,eur_foil:0,tix:0}}},methods:{copyToClipboard:function(){var t=document.getElementById("output");t.select(),t.setSelectionRange(0,999999),navigator.clipboard.writeText(t.value),alert("copied to clipboard!")},updatePrice:function(t,e){if(null!=e){var n=Number(e);t+=n}return Math.round(100*t)/100},resetData:function(){this.rarities.common=0,this.rarities.uncommon=0,this.rarities.rare=0,this.rarities.mythic=0,this.prices.usd=0,this.prices.usd_foil=0,this.prices.usd_etched=0,this.prices.eur=0,this.prices.eur_foi=0,this.prices.usd=0}}};n("d511");const ut=d()(ct,[["render",Z],["__scopeId","data-v-6c8bec60"]]);var ot=ut;function it(t,e,n,a,c,u){return Object(r["h"])(),Object(r["d"])("div")}var st=n("b85c"),lt=n("1da1"),ft=(n("96cf"),n("a434"),n("c96a"),n("7db0"),n("d4ec")),dt=n("bee2"),pt=n("bc3a"),bt=n.n(pt),mt=n("ed18");mt["config"]();var ht=Object({NODE_ENV:"production",BASE_URL:"/what-am-i-missing/"}),vt={port:ht.PORT?ht.PORT:8080,baseUrl:ht.BASEURL?ht.baseURL:"https://api.scryfall.com"},Ot=bt.a.create({baseURL:vt.baseUrl,headers:{"Content-Type":"application/json"}}),jt=function(){function t(){Object(ft["a"])(this,t)}return Object(dt["a"])(t,[{key:"getNamedCard",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ot.get("/cards/named?exact=".concat(e)));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getAllSets",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.removeBaseUrl(e),t.abrupt("return",Ot.get(n));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"removeBaseUrl",value:function(t){var e=Ot.defaults.baseURL;return t.replace(e,"")}},{key:"POST_Collection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={identifiers:[]};return t.forEach((function(t){t.name&&e.identifiers.push({name:t.name})})),Ot.post("/cards/collection",e)}}]),t}(),yt={name:"scryfallData",props:["outputText"],data:function(){return{scryfall:new jt,cardData:[]}},methods:{fetchScryfallData:function(){var t=this;return Object(lt["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.splitAmountAndNameList(t.outputText),r=[];case 2:if(!(n.length>75)){e.next=9;break}return a=n.splice(0,75),e.next=6,t.getFullCardListInfo(a,r);case 6:r=e.sent,e.next=2;break;case 9:return e.next=11,t.getFullCardListInfo(n,r);case 11:t.cardData=e.sent;case 12:case"end":return e.stop()}}),e)})))()},convertDataToInfo:function(t){var e=this;return Object(lt["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=[],n.next=3,e.scryfall.getAllSets(t.prints_search_uri);case 3:return a=n.sent,a.data.data.forEach((function(t){r.push({name:t.set_name,code:t.set})})),n.abrupt("return",{name:t.name,sets:r,image:t.image_uris.small,rarity:t.rarity,prices:t.prices,qty:0});case 6:case"end":return n.stop()}}),n)})))()},getFullCardListInfo:function(t,e){var n=this;return Object(lt["a"])(regeneratorRuntime.mark((function r(){var a,c,u,o,i,s,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=[],t.forEach((function(t){var e={name:t.card.name};a.push(e)})),r.next=4,n.scryfall.POST_Collection(a);case 4:c=r.sent,u=c.data.data,o=Object(st["a"])(u),r.prev=7,o.s();case 9:if((i=o.n()).done){r.next=18;break}return s=i.value,r.next=13,n.convertDataToInfo(s);case 13:l=r.sent,l=n.setQuantity(l,t),e.push(l);case 16:r.next=9;break;case 18:r.next=23;break;case 20:r.prev=20,r.t0=r["catch"](7),o.e(r.t0);case 23:return r.prev=23,o.f(),r.finish(23);case 26:return r.abrupt("return",e);case 27:case"end":return r.stop()}}),r,null,[[7,20,23,26]])})))()},setQuantity:function(t,e){var n=function(e){return e.card.name.toLowerCase()===t.name.toLowerCase()},r=e.find(n);return t.qty=r.card.quantity,t},splitAmountAndNameList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return e.forEach((function(e){var r=t.splitAmountAndName(e);n.push({card:r})})),n},splitAmountAndName:function(t){var e=t.split(" "),n=Number(e[0]);e.shift();var r=e.join(" ");return{name:r,quantity:n}}},watch:{outputText:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetchScryfallData();case 2:this.$emit("onCardInfoUpdated",this.cardData);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}};const gt=d()(yt,[["render",it]]);var xt=gt,wt={name:"mainBody",data:function(){return{decklist:"",collection:"",outputResult:"",scryfallInfo:[]}},components:{inputs:w,compareData:U,outputData:ot,scryfallData:xt},methods:{something:function(t){this.scryfallInfo=t}},props:[]};const _t=d()(wt,[["render",v]]);var kt=_t,It={name:"App",components:{Header:b,mainBody:kt}};n("bbb7");const Tt=d()(It,[["render",a]]);var Dt=Tt;Object(r["b"])(Dt).mount("#app")},"5c6f":function(t,e,n){"use strict";n("42ac")},"5c78":function(t,e,n){"use strict";n("b805")},7359:function(t,e,n){"use strict";n("4ae7")},"86cb":function(t,e,n){},b805:function(t,e,n){},bbb7:function(t,e,n){"use strict";n("86cb")},d511:function(t,e,n){"use strict";n("37fc")},ed65:function(t,e,n){"use strict";n("050c")}});
//# sourceMappingURL=app.bfe67310.js.map