(function(){"use strict";var e={4616:function(e,t,r){var a=r(9242),n=r(3396);function s(e,t,r,a,s,i){const c=(0,n.up)("Header"),o=(0,n.up)("card-list-inputs"),l=(0,n.up)("list-output"),d=(0,n.up)("scryfall-data");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(c,{title:"Magic Deck Gap Analyzer"}),(0,n.Wm)(o,{onMissing_cards:t[0]||(t[0]=t=>e.missing_cards=t)}),e.missing_cards.size>0?((0,n.wg)(),(0,n.j4)(l,{key:0,missing_cards:e.missing_cards},null,8,["missing_cards"])):(0,n.kq)("",!0),e.missing_cards.size>0?((0,n.wg)(),(0,n.j4)(d,{key:1,missing_cards:e.missing_cards},null,8,["missing_cards"])):(0,n.kq)("",!0)],64)}var i=r(6520);const c={class:"container"};function o(e,t,r,s,i,o){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",c,[(0,n.wy)((0,n._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.decklist=t),placeholder:"Decklist"},null,512),[[a.nr,e.decklist]]),(0,n.wy)((0,n._)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.collection=t),placeholder:"Collection"},null,512),[[a.nr,e.collection]])]),(0,n._)("button",{onClick:t[2]||(t[2]=(...t)=>e.analyze&&e.analyze(...t))},"Analyze")],64)}var l=r(7327);class d{constructor(e){(0,l.Z)(this,"quantity",void 0),(0,l.Z)(this,"name",void 0),this.quantity=this.set_quantity(e),this.name=this.set_card_name(e)}set_quantity(e){const t=e.split(" ")[0];return parseInt(t.replace(/[0-9]x /,""))}set_card_name(e){const t=e.split(" ")[0],r=e.replace(t,"");return this.trim_meta_data(r)}trim_meta_data(e){const t=/(\[.*\])|(\(.*\))/;return e.replace(t,"").trim()}}var u=function(e,t,r,a){var n,s=arguments.length,i=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(i=(s<3?n(i):s>3?n(t,r,i):n(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};let p=class extends i.w3{};p=u([(0,i.Ei)({name:"CardListInputs",emits:["missing_cards"],data(){return{decklist:"",collection:"",missing_cards:new Map}},methods:{analyze(){this.missing_cards=new Map;const e=this.split_cards(this.decklist),t=this.split_cards(this.collection);e.forEach(((e,r)=>{this.set_missing_cards(r,e,t)})),this.$emit("missing_cards",this.missing_cards)},split_cards(e){const t=e.split("\n"),r=new Map;return t.forEach((e=>{const t=new d(e);r.set(t.name,t.quantity)})),r},set_missing_cards(e,t,r){if(r.has(e)){const a=r.get(e);if(a&&a<t){const r={name:e,quantity:t-a};this.missing_cards.set(r.name,r.quantity)}}else this.missing_cards.set(e,t)}}})],p);var f=p,_=r(89);const g=(0,_.Z)(f,[["render",o],["__scopeId","data-v-a2f61ed4"]]);var m=g,h=r(7139);const v={class:"header"},y={class:"nav-element"},w={class:"nav-element"},b=["src"];function k(e,t,r,a,s,i){return(0,n.wg)(),(0,n.iD)("div",v,[(0,n._)("div",y,[(0,n._)("h1",null,(0,h.zw)(e.title),1)]),(0,n._)("div",w,[(0,n._)("img",{src:e.question_mark},null,8,b)])])}var O=function(e,t,r,a){var n,s=arguments.length,i=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(i=(s<3?n(i):s>3?n(t,r,i):n(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};let j=class extends i.w3{};j=O([(0,i.Ei)({name:"Header",props:{title:{type:String,required:!0}},data(){return{question_mark:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d9/Icon-round-Question_mark.svg/2048px-Icon-round-Question_mark.svg.png"}}})],j);var D=j;const x=(0,_.Z)(D,[["render",k],["__scopeId","data-v-57a5e4e2"]]);var R=x;const q={class:"container"};function P(e,t,r,s,i,c){return(0,n.wg)(),(0,n.iD)("div",q,[(0,n.wy)((0,n._)("textarea",{disabled:"","onUpdate:modelValue":t[0]||(t[0]=t=>e.decklist=t),placeholder:"output"},null,512),[[a.nr,e.decklist]]),(0,n._)("button",{onClick:t[1]||(t[1]=(...t)=>e.copy_to_clipboard&&e.copy_to_clipboard(...t))},"Copy to clipboard")])}var C=function(e,t,r,a){var n,s=arguments.length,i=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(i=(s<3?n(i):s>3?n(t,r,i):n(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};let E=class extends i.w3{};E=C([(0,i.Ei)({name:"ListOutput",props:{missing_cards:{type:Map,required:!0}},methods:{convert_map_to_string(e){let t="";return e.forEach(((e,r)=>{t+=`${e} ${r}\n`})),t},copy_to_clipboard(){const e=this.decklist;navigator.clipboard.writeText(e).then((()=>{console.log("copied to clipboard")}),(e=>{console.error("could not copy to clipboard",e)}))}},watch:{missing_cards:{immediate:!0,handler(){this.decklist=this.convert_map_to_string(this.missing_cards)}}}})],E);var I=E;const M=(0,_.Z)(I,[["render",P],["__scopeId","data-v-19288ed3"]]);var z=M;const Z={class:"container"};function H(e,t,r,a,s,i){const c=(0,n.up)("card-data");return(0,n.wg)(),(0,n.iD)("div",Z,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.cards,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"card-data",key:e.name},[(0,n.Wm)(c,{card:e},null,8,["card"])])))),128))])}const $=e=>((0,n.dD)("data-v-9a0d6eea"),e=e(),(0,n.Cn)(),e),S={class:"card-data"},L=["src"],T={class:"dialog-body"},U=["src"],W={class:"card-info"},Y=$((()=>(0,n._)("b",null,"name:",-1))),A=$((()=>(0,n._)("b",null," sets:",-1))),V=["href"];function B(e,t,r,a,s,i){const c=(0,n.up)("message-box");return(0,n.wg)(),(0,n.iD)("div",S,[(0,n._)("img",{class:"thumbnail",src:e.card.image_uris.small,onClick:t[0]||(t[0]=t=>e.visible=!0)},null,8,L),e.visible?((0,n.wg)(),(0,n.j4)(c,{key:0,onClose:t[1]||(t[1]=t=>e.visible=!1)},{default:(0,n.w5)((()=>[(0,n._)("div",T,[(0,n._)("img",{class:"enlarged-image",src:e.card.image_uris.large},null,8,U),(0,n._)("div",W,[Y,(0,n._)("p",null,(0,h.zw)(e.card.name),1),A,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.reprints,(e=>((0,n.wg)(),(0,n.iD)("p",{class:"sets",key:e},(0,h.zw)(e)+",",1)))),128)),(0,n._)("a",{href:e.card.scryfall_uri},"scryfall",8,V)])])])),_:1})):(0,n.kq)("",!0)])}r(7658);const K={class:"dialog-content"},Q={class:"dialog-body"};function F(e,t,r,a,s,i){return(0,n.wg)(),(0,n.iD)("div",{class:"message-box dialog-mask",onClick:t[0]||(t[0]=(...t)=>e.close&&e.close(...t))},[(0,n._)("div",K,[(0,n._)("div",Q,[(0,n.WI)(e.$slots,"default",{},void 0,!0)])])])}var G=function(e,t,r,a){var n,s=arguments.length,i=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(i=(s<3?n(i):s>3?n(t,r,i):n(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};let J=class extends i.w3{};J=G([(0,i.Ei)({name:"MessageBox",methods:{close(){this.$emit("close")}}})],J);var N=J;const X=(0,_.Z)(N,[["render",F],["__scopeId","data-v-888baef6"]]);var ee=X,te=r(4161);const re=te.Z.create({baseURL:"https://api.scryfall.com",timeout:6e3});class ae{constructor(){(0,l.Z)(this,"api",void 0),this.api=re}async get_card(e){const t=await this.api.get(`/cards/named?exact=${e}`);return await t.data}async get_card_image_uri(e){const t=await this.get_card(e);return t.image_uris.normal}async get_card_bulk(e){const t=await this.api.post("/cards/collection",{identifiers:e.map((e=>({name:e})))});return await t.data.data}async get_reprints(e){const t=await this.api.get(e);return await t.data.data}}var ne=function(e,t,r,a){var n,s=arguments.length,i=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(i=(s<3?n(i):s>3?n(t,r,i):n(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};let se=class extends i.w3{};se=ne([(0,i.Ei)({name:"cardData",components:{MessageBox:ee},props:{card:{type:Object,required:!0}},data(){return{api:new ae,visible:!1,reprints:[]}},watch:{async visible(e){if(e){const e=await this.api.get_reprints(this.card.prints_search_uri);e.forEach((e=>{this.reprints.push(e.set_name)}))}}}})],se);var ie=se;const ce=(0,_.Z)(ie,[["render",B],["__scopeId","data-v-9a0d6eea"]]);var oe=ce,le=function(e,t,r,a){var n,s=arguments.length,i=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(i=(s<3?n(i):s>3?n(t,r,i):n(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};let de=class extends i.w3{};de=le([(0,i.Ei)({name:"ScryfallData",components:{cardData:oe},data(){return{Scryfall:new ae,cards:[]}},props:{missing_cards:{type:Map,required:!0}},methods:{async get_bulk_cards(e){const t=Array.from(e.keys());this.cards=await this.Scryfall.get_card_bulk(t)}},watch:{missing_cards:{immediate:!0,async handler(){this.missing_cards&&0===this.missing_cards.size||await this.get_bulk_cards(this.missing_cards)}}}})],de);var ue=de;const pe=(0,_.Z)(ue,[["render",H],["__scopeId","data-v-338fbc2a"]]);var fe=pe,_e=function(e,t,r,a){var n,s=arguments.length,i=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(i=(s<3?n(i):s>3?n(t,r,i):n(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};let ge=class extends i.w3{};ge=_e([(0,i.Ei)({components:{CardListInputs:m,Header:R,listOutput:z,ScryfallData:fe},data(){return{missing_cards:new Map}}})],ge);var me=ge;const he=(0,_.Z)(me,[["render",s]]);var ve=he,ye=r(65),we=(0,ye.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,a.ri)(ve).use(we).mount("#app")}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,r),s.exports}r.m=e,function(){var e=[];r.O=function(t,a,n,s){if(!a){var i=1/0;for(d=0;d<e.length;d++){a=e[d][0],n=e[d][1],s=e[d][2];for(var c=!0,o=0;o<a.length;o++)(!1&s||i>=s)&&Object.keys(r.O).every((function(e){return r.O[e](a[o])}))?a.splice(o--,1):(c=!1,s<i&&(i=s));if(c){e.splice(d--,1);var l=n();void 0!==l&&(t=l)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[a,n,s]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,s,i=a[0],c=a[1],o=a[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(n in c)r.o(c,n)&&(r.m[n]=c[n]);if(o)var d=o(r)}for(t&&t(a);l<i.length;l++)s=i[l],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(d)},a=self["webpackChunkwhat_am_i_missing"]=self["webpackChunkwhat_am_i_missing"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(4616)}));a=r.O(a)})();
//# sourceMappingURL=app.f38f772f.js.map